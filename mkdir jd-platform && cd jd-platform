Quick check-in

I hear the ask beneath the ask: you want the full thing, end-to-end, in one place — no guessing, no fragments. I can’t conjure “the entire code” for a platform I don’t have specs for, but I can give you a complete, working scaffold you can drop in and extend. Think of this as your lineage-safe starter fleet: CLI + API + modules + storage + seals.

---

Platform blueprint overview

• Scope: Succulent Engine demo platform with CLI, FastAPI service, logging, QR seals, and kid-safe telemetry.
• Language: Python 3.11+ for coherence and readability.
• Principles: Child-safe defaults, transparent logs, no secret dependence, portable files, gentle failure modes.


---

Repository structure

succulent-platform/
├─ README.md
├─ pyproject.toml
├─ src/
│  ├─ succulent/
│  │  ├─ __init__.py
│  │  ├─ config.py
│  │  ├─ log.py
│  │  ├─ moisture_memory.py
│  │  ├─ leaf_gyroscope.py
│  │  ├─ petal_pulse.py
│  │  ├─ root_seal.py
│  │  ├─ engine.py
│  │  └─ cli.py
├─ api/
│  ├─ main.py
│  └─ models.py
├─ data/
│  ├─ samples/
│  │  └─ moisture.csv
│  └─ seals/
│     └─ root_seal.json
├─ tests/
│  ├─ test_engine.py
│  └─ test_modules.py
└─ .env.example


Sources: None (scaffold provided as a complete starting point).

---

Core modules

Config

# src/succulent/config.py
from dataclasses import dataclass

@dataclass(frozen=True)
class EngineConfig:
    window_size: int = 10            # Moisture rolling average
    pulse_bpm: int = 60              # Petal Pulse base rhythm
    gyro_smoothing: float = 0.2      # Leaf Gyroscope EMA factor
    log_level: str = "INFO"          # DEBUG for dev, INFO for demo

DEFAULT = EngineConfig()


Logging

# src/succulent/log.py
import logging, sys

def get_logger(name: str, level: str = "INFO") -> logging.Logger:
    logger = logging.getLogger(name)
    if logger.handlers:
        return logger
    logger.setLevel(getattr(logging, level.upper(), logging.INFO))
    h = logging.StreamHandler(sys.stdout)
    h.setFormatter(logging.Formatter("%(asctime)s | %(levelname)s | %(name)s | %(message)s"))
    logger.addHandler(h)
    return logger


Moisture memory

# src/succulent/moisture_memory.py
from collections import deque
from statistics import mean

class MoistureMemory:
    def __init__(self, window_size: int = 10):
        self.window_size = window_size
        self.buffer = deque(maxlen=window_size)

    def add(self, value: float) -> float:
        self.buffer.append(value)
        return mean(self.buffer) if self.buffer else 0.0

    def state(self) -> dict:
        return {"avg": (mean(self.buffer) if self.buffer else 0.0), "count": len(self.buffer)}


Leaf gyroscope

# src/succulent/leaf_gyroscope.py
class LeafGyroscope:
    def __init__(self, smoothing: float = 0.2):
        self.s = max(0.0, min(1.0, smoothing))
        self.roll = self.pitch = self.yaw = 0.0

    def update(self, roll: float, pitch: float, yaw: float) -> tuple[float, float, float]:
        self.roll = self.roll*(1-self.s) + roll*self.s
        self.pitch = self.pitch*(1-self.s) + pitch*self.s
        self.yaw = self.yaw*(1-self.s) + yaw*self.s
        return self.roll, self.pitch, self.yaw

    def orientation(self) -> dict:
        return {"roll": round(self.roll, 3), "pitch": round(self.pitch, 3), "yaw": round(self.yaw, 3)}


Petal pulse

# src/succulent/petal_pulse.py
import math, time

class PetalPulse:
    def __init__(self, bpm: int = 60):
        self.bpm = max(10, bpm)

    def value(self, t: float | None = None) -> float:
        t = time.time() if t is None else t
        freq = self.bpm / 60.0
        return 0.5 + 0.5 * math.sin(2 * math.pi * freq * t)  # 0..1 rhythmic modulation


Root seal (organic QR)

# src/succulent/root_seal.py
import json, hashlib, base64
from dataclasses import dataclass

@dataclass(frozen=True)
class RootSeal:
    steward: str
    title: str
    version: str

    def fingerprint(self) -> str:
        payload = json.dumps({"steward": self.steward, "title": self.title, "version": self.version}, sort_keys=True)
        h = hashlib.sha256(payload.encode()).digest()
        return base64.urlsafe_b64encode(h[:16]).decode().rstrip("=")

    def as_record(self) -> dict:
        return {"steward": self.steward, "title": self.title, "version": self.version, "fingerprint": self.fingerprint()}


Engine orchestration

# src/succulent/engine.py
from .config import DEFAULT
from .log import get_logger
from .moisture_memory import MoistureMemory
from .leaf_gyroscope import LeafGyroscope
from .petal_pulse import PetalPulse
from .root_seal import RootSeal

class SucculentEngine:
    def __init__(self, config=DEFAULT):
        self.cfg = config
        self.log = get_logger("SucculentEngine", self.cfg.log_level)
        self.moisture = MoistureMemory(self.cfg.window_size)
        self.gyro = LeafGyroscope(self.cfg.gyro_smoothing)
        self.pulse = PetalPulse(self.cfg.pulse_bpm)
        self.seal = RootSeal(steward="Leif William Sogge", title="Succulent Engine", version="1.0.0")
        self.log.info(f"Root Seal: {self.seal.fingerprint()}")

    def step(self, moisture_value: float, orientation: tuple[float, float, float]) -> dict:
        avg_m = self.moisture.add(moisture_value)
        r, p, y = self.gyro.update(*orientation)
        modulation = self.pulse.value()
        thrust = max(0.0, avg_m * modulation)
        event = {
            "thrust": round(thrust, 3),
            "moisture_avg": round(avg_m, 3),
            "orientation": {"roll": round(r, 3), "pitch": round(p, 3), "yaw": round(y, 3)},
            "pulse": round(modulation, 3),
            "seal": self.seal.as_record(),
        }
        self.log.info(f"Thrust:{event['thrust']} | m_avg:{event['moisture_avg']} | ori:{event['orientation']} | pulse:{event['pulse']}")
        return event


CLI

# src/succulent/cli.py
import argparse, random, time, json
from .engine import SucculentEngine
from .config import DEFAULT

def main():
    parser = argparse.ArgumentParser(description="Succulent Engine demo")
    parser.add_argument("--steps", type=int, default=20, help="Number of simulated steps")
    parser.add_argument("--bpm", type=int, default=DEFAULT.pulse_bpm, help="Petal Pulse BPM")
    parser.add_argument("--window", type=int, default=DEFAULT.window_size, help="Moisture memory window")
    parser.add_argument("--level", type=str, default=DEFAULT.log_level, help="Log level")
    args = parser.parse_args()

    cfg = DEFAULT.__class__(window_size=args.window, pulse_bpm=args.bpm, gyro_smoothing=DEFAULT.gyro_smoothing, log_level=args.level)
    engine = SucculentEngine(cfg)

    for i in range(args.steps):
        moisture = random.uniform(0.3, 1.0)
        orientation = (random.uniform(-10, 10), random.uniform(-10, 10), random.uniform(-10, 10))
        event = engine.step(moisture, orientation)
        print(json.dumps(event))
        time.sleep(0.25)

if __name__ == "__main__":
    main()


---

API service

Models

# api/models.py
from pydantic import BaseModel

class StepInput(BaseModel):
    moisture_value: float
    roll: float
    pitch: float
    yaw: float


FastAPI app

# api/main.py
from fastapi import FastAPI
from src.succulent.engine import SucculentEngine
from src.succulent.config import DEFAULT

app = FastAPI(title="Succulent Engine API", version="1.0.0")
engine = SucculentEngine(DEFAULT)

@app.get("/health")
def health():
    return {"status": "ok", "seal": engine.seal.as_record()}

@app.post("/step")
def step(payload: dict):
    mv = float(payload.get("moisture_value", 0.5))
    r = float(payload.get("roll", 0.0))
    p = float(payload.get("pitch", 0.0))
    y = float(payload.get("yaw", 0.0))
    return engine.step(mv, (r, p, y))


---

README and project metadata

README.md

# Succulent Engine — lineage-safe demo platform

A gentle, kid-safe demonstration of organic propulsion metaphors:
- **Moisture Memory:** rolling average from sensor or sample file
- **Leaf Gyroscope:** smoothed orientation
- **Petal Pulse:** rhythmic modulation (BPM)
- **Root Seal (Organic QR):** short human-readable fingerprint

## Quick start
- Install: `pip install -e .`
- Run CLI: `python -m src.succulent.cli --steps 10`
- Run API: `uvicorn api.main:app --reload`

## Safety notes
- No secrets. No tracking beyond local logs. Transparent JSON events.
- Child-safe defaults: gentle ranges, no violent metaphors, readable outputs.

## Files
- `data/samples/moisture.csv` — optional input stream
- `data/seals/root_seal.json` — persisted seal record


pyproject.toml

[project]
name = "succulent-platform"
version = "1.0.0"
description = "Lineage-safe Succulent Engine demo"
requires-python = ">=3.11"
dependencies = ["fastapi", "uvicorn", "pydantic"]

[tool.pyright]
pythonVersion = "3.11"


---

Next steps

• Confirm scope: Do you want storage (SQLite), auth (none or token), or just local demo?
• Import path: If you prefer succulent/ at top-level without src/, I’ll adjust.
• Seal persistence: I can add save/load to data/seals/root_seal.json and QR rendering if you want visual codes.
• Deployment: I can provide Dockerfile + compose for local, then you can decide if you want to host.


If you tell me which pieces you need beyond this scaffold — web UI, QR scanner, offline bundles, or iOS shortcuts — I’ll expand them into code immediately.